/* ============================================
   ðŸŽ® PIXEL ART VALENTINE'S WORLD
   8-bit / Terraria Style with Hello Kitty
   ============================================ */

/* Import pixel font */
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

/* === Design Tokens - Pixel Art Palette === */
:root {
    /* 8-bit Color Palette */
    --pixel-pink: #ff6b97;
    --pixel-pink-dark: #d44a7a;
    --pixel-pink-light: #ffb3c6;
    --pixel-red: #ff4757;
    --pixel-white: #ffffff;
    --pixel-cream: #fff5dc;
    --pixel-sky-top: #87ceeb;
    --pixel-sky-mid: #b0e0ff;
    --pixel-sky-bottom: #ffd4e5;
    --pixel-grass: #7ec850;
    --pixel-grass-dark: #5ba338;
    --pixel-dirt: #8b5a2b;
    --pixel-dirt-dark: #6b4423;
    --pixel-black: #2d1b2e;
    --pixel-gray: #8b7080;
    --pixel-gold: #ffd700;
    --pixel-yellow: #ffcc00;
    --pixel-heart: #ff1493;
    --pixel-bow: #ff1493;

    /* Typography */
    --font-pixel: 'Press Start 2P', cursive;

    /* Pixel perfect sizing */
    --px: 4px;

    /* Transitions - stepped for pixel feel */
    --transition-pixel: all 0.1s steps(4);
}

/* === Base Styles === */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
}

html,
body {
    height: 100%;
    overflow: hidden;
}

body {
    font-family: var(--font-pixel);
    background: var(--pixel-sky-mid);
    color: var(--pixel-black);
}

.game-container {
    width: 100vw;
    height: 100vh;
    position: relative;
    overflow: hidden;
}

/* === Page System === */
.page {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s steps(4), visibility 0.3s steps(4);
}

.page.active {
    opacity: 1;
    visibility: visible;
}

/* === Pixel Art Background === */
/* Consistent Sky */
.pixel-sky {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    background: #87CEEB;
    /* Solid light blue */
}

/* Override variations to keep consistent sky */
.pixel-sky.sunset,
.pixel-sky.evening,
.pixel-sky.romantic {
    background: #87CEEB;
}

/* Pixel Clouds */
.pixel-clouds {
    position: absolute;
    top: 0;
    left: 0;
    width: 200%;
    height: 40%;
    overflow: visible;
}

.pixel-cloud {
    position: absolute;
    width: calc(var(--px) * 4);
    height: calc(var(--px) * 4);
    background: var(--pixel-white);
    box-shadow:
        calc(var(--px) * 1) 0 0 var(--pixel-white),
        calc(var(--px) * 2) 0 0 var(--pixel-white),
        calc(var(--px) * 3) 0 0 var(--pixel-white),
        calc(var(--px) * 4) 0 0 var(--pixel-white),
        calc(var(--px) * 0) calc(var(--px) * -1) 0 var(--pixel-white),
        calc(var(--px) * 1) calc(var(--px) * -1) 0 var(--pixel-white),
        calc(var(--px) * 2) calc(var(--px) * -1) 0 var(--pixel-white),
        calc(var(--px) * 3) calc(var(--px) * -1) 0 var(--pixel-white),
        calc(var(--px) * 4) calc(var(--px) * -1) 0 var(--pixel-white),
        calc(var(--px) * 1) calc(var(--px) * -2) 0 var(--pixel-white),
        calc(var(--px) * 2) calc(var(--px) * -2) 0 var(--pixel-white),
        calc(var(--px) * 3) calc(var(--px) * -2) 0 var(--pixel-white);
    animation: floatCloud 25s linear infinite;
}

.pixel-cloud:nth-child(1) {
    top: 8%;
    left: 10%;
    animation-delay: 0s;
    transform: scale(1.5);
}

.pixel-cloud:nth-child(2) {
    top: 15%;
    left: 40%;
    animation-delay: -8s;
    transform: scale(2);
}

.pixel-cloud:nth-child(3) {
    top: 5%;
    left: 70%;
    animation-delay: -16s;
    transform: scale(1.2);
}

.pixel-cloud:nth-child(4) {
    top: 20%;
    left: 90%;
    animation-delay: -20s;
    transform: scale(1.8);
}

@keyframes floatCloud {
    0% {
        transform: translateX(0);
    }

    100% {
        transform: translateX(-100vw);
    }
}

/* Pixel Hearts */
.pixel-hearts {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 60%;
    pointer-events: none;
}

.pixel-heart {
    position: absolute;
    width: calc(var(--px) * 3);
    height: calc(var(--px) * 3);
    background: var(--pixel-heart);
    box-shadow:
        calc(var(--px) * 1) 0 0 var(--pixel-heart),
        calc(var(--px) * -1) calc(var(--px) * -1) 0 var(--pixel-heart),
        0 calc(var(--px) * -1) 0 var(--pixel-heart),
        calc(var(--px) * 1) calc(var(--px) * -1) 0 var(--pixel-heart),
        calc(var(--px) * 2) calc(var(--px) * -1) 0 var(--pixel-heart),
        0 calc(var(--px) * 1) 0 var(--pixel-heart),
        calc(var(--px) * 1) calc(var(--px) * 1) 0 var(--pixel-heart),
        0 calc(var(--px) * 2) 0 var(--pixel-heart),
        calc(var(--px) * 1) calc(var(--px) * 2) 0 var(--pixel-heart);
    animation: floatHeart 3s ease-in-out infinite;
    opacity: 0.8;
}

.pixel-heart:nth-child(1) {
    top: 10%;
    left: 10%;
    animation-delay: 0s;
}

.pixel-heart:nth-child(2) {
    top: 25%;
    left: 25%;
    animation-delay: -0.5s;
    transform: scale(1.5);
}

.pixel-heart:nth-child(3) {
    top: 15%;
    left: 50%;
    animation-delay: -1s;
}

.pixel-heart:nth-child(4) {
    top: 30%;
    left: 70%;
    animation-delay: -1.5s;
    transform: scale(0.8);
}

.pixel-heart:nth-child(5) {
    top: 20%;
    left: 85%;
    animation-delay: -2s;
}

.pixel-heart:nth-child(6) {
    top: 8%;
    left: 35%;
    animation-delay: -2.5s;
    transform: scale(1.2);
}

@keyframes floatHeart {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-12px);
    }
}

/* === Pixel Ground - Terraria Style === */
.pixel-ground {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100px;
    z-index: 2;
}

.ground-grass {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 24px;
    background: repeating-linear-gradient(90deg,
            var(--pixel-grass) 0px,
            var(--pixel-grass) 8px,
            var(--pixel-grass-dark) 8px,
            var(--pixel-grass-dark) 16px);
    box-shadow: inset 0 -8px 0 var(--pixel-grass-dark);
}

.ground-grass::before {
    content: '';
    position: absolute;
    top: -8px;
    left: 0;
    width: 100%;
    height: 8px;
    background: repeating-linear-gradient(90deg,
            transparent 0px,
            transparent 8px,
            var(--pixel-grass) 8px,
            var(--pixel-grass) 12px,
            transparent 12px,
            transparent 24px);
}

.ground-dirt {
    position: absolute;
    top: 24px;
    left: 0;
    width: 100%;
    height: 76px;
    background: repeating-linear-gradient(90deg,
            var(--pixel-dirt) 0px,
            var(--pixel-dirt) 16px,
            var(--pixel-dirt-dark) 16px,
            var(--pixel-dirt-dark) 32px);
}

/* === Typography === */
.pixel-title {
    font-family: var(--font-pixel);
    font-size: 20px;
    color: var(--pixel-white);
    text-shadow:
        3px 3px 0 var(--pixel-pink-dark),
        -1px -1px 0 var(--pixel-heart),
        1px -1px 0 var(--pixel-heart),
        -1px 1px 0 var(--pixel-heart);
    text-align: center;
    line-height: 2;
    z-index: 10;
    animation: pixelPulse 1s steps(2) infinite;
}

.pixel-title.small {
    font-size: 14px;
    line-height: 1.8;
}

.pixel-title.ending {
    font-size: 16px;
    margin-bottom: 20px;
}

.pixel-subtitle {
    font-family: var(--font-pixel);
    font-size: 14px;
    color: var(--pixel-red);
    text-shadow: 2px 2px 0 var(--pixel-black);
}

.pixel-text {
    font-family: var(--font-pixel);
    font-size: 10px;
    color: var(--pixel-white);
}

.pixel-signature {
    font-family: var(--font-pixel);
    font-size: 12px;
    color: var(--pixel-heart);
    text-shadow: 2px 2px 0 var(--pixel-white);
    margin-top: 20px;
}

@keyframes pixelPulse {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.02);
    }
}

/* === Pixel Buttons === */
.pixel-buttons {
    display: flex;
    gap: 24px;
    margin-top: 24px;
    z-index: 10;
}

.pixel-btn {
    font-family: var(--font-pixel);
    font-size: 11px;
    padding: 14px 28px;
    border: none;
    cursor: pointer;
    background: var(--pixel-pink);
    color: var(--pixel-white);
    box-shadow:
        4px 4px 0 var(--pixel-pink-dark),
        inset -3px -3px 0 rgba(0, 0, 0, 0.2),
        inset 3px 3px 0 rgba(255, 255, 255, 0.3);
    transition: var(--transition-pixel);
    position: relative;
}

.pixel-btn:hover {
    transform: translate(2px, 2px);
    box-shadow:
        2px 2px 0 var(--pixel-pink-dark),
        inset -3px -3px 0 rgba(0, 0, 0, 0.2),
        inset 3px 3px 0 rgba(255, 255, 255, 0.3);
}

.pixel-btn:active {
    transform: translate(4px, 4px);
    box-shadow:
        0 0 0 var(--pixel-pink-dark),
        inset -3px -3px 0 rgba(0, 0, 0, 0.3);
}

.pixel-btn.no-btn {
    background: var(--pixel-gray);
    box-shadow:
        4px 4px 0 #5a4a5a,
        inset -3px -3px 0 rgba(0, 0, 0, 0.2),
        inset 3px 3px 0 rgba(255, 255, 255, 0.2);
}

/* Navigation arrow */
.pixel-nav-arrow {
    position: absolute;
    right: 30px;
    bottom: 120px;
    font-family: var(--font-pixel);
    font-size: 20px;
    padding: 12px 20px;
    background: var(--pixel-pink);
    color: var(--pixel-white);
    border: none;
    cursor: pointer;
    box-shadow: 4px 4px 0 var(--pixel-pink-dark);
    z-index: 20;
    transition: var(--transition-pixel);
}

.pixel-nav-arrow:hover {
    transform: translate(2px, 2px);
    box-shadow: 2px 2px 0 var(--pixel-pink-dark);
}

.pixel-nav-arrow.final {
    font-size: 24px;
    animation: heartBeat 1s steps(2) infinite;
}

@keyframes heartBeat {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.1);
    }
}

/* === Page Content === */
.page-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    z-index: 10;
    margin-bottom: 80px;
}

/* === Hello Kitty Pixel Characters - SVG Version === */
.characters {
    position: absolute;
    bottom: 90px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 30px;
    z-index: 5;
}

/* Pixel Hello Kitty using Box Shadows (Generated) */
.pixel-hello-kitty {
    position: relative;
    width: 32px;
    height: 32px;
    transform: scale(4);
    transform-origin: bottom center;
    animation: kittyBounce 0.6s steps(2) infinite;
    /* Spacing handled by gap in parent */
}

/* Ensure explicit single pseudo-element usage */
.pixel-hello-kitty::after {
    content: none !important;
    display: none !important;
}

/* Base Setup for CSS Shadows on ::before only */
.pixel-hello-kitty::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 1px;
    height: 1px;
    background: transparent;
    /* Shadows are applied via specific class modifiers appended below */
}

.pixel-hello-kitty.female {
    animation-delay: -0.3s;
}

.pixel-hello-kitty.male {
    /* Male specific if any */
}

/* Hide legacy HTML elements */
.pixel-hello-kitty .hk-head,
.pixel-hello-kitty .hk-body,
.pixel-hello-kitty .hk-face,
.pixel-hello-kitty .hk-ear,
.pixel-hello-kitty .hk-eye,
.pixel-hello-kitty .hk-nose,
.pixel-hello-kitty .hk-whisker,
.pixel-hello-kitty .hk-arm,
.pixel-hello-kitty .hk-bow,
.pixel-hello-kitty .hk-bowtie,
.pixel-hello-kitty .hk-pupil {
    display: none !important;
}

/* Auto-extracted from reference with background removal */
.pixel-hello-kitty.female::before,
.pixel-hello-kitty.female.running::before,
.mini-hk.female::before,
.mini-hk.couple::after {
    width: 1px;
    height: 1px;
    box-shadow:
        17px 2px 0 var(--pixel-white),
        7px 3px 0 var(--pixel-black),
        8px 3px 0 var(--pixel-black),
        9px 3px 0 var(--pixel-black),
        16px 3px 0 var(--pixel-heart),
        17px 3px 0 var(--pixel-heart),
        18px 3px 0 var(--pixel-black),
        20px 3px 0 var(--pixel-black),
        21px 3px 0 var(--pixel-black),
        22px 3px 0 var(--pixel-black),
        7px 4px 0 var(--pixel-white),
        8px 4px 0 var(--pixel-white),
        9px 4px 0 var(--pixel-white),
        10px 4px 0 var(--pixel-white),
        11px 4px 0 var(--pixel-black),
        12px 4px 0 var(--pixel-black),
        13px 4px 0 var(--pixel-black),
        14px 4px 0 var(--pixel-black),
        15px 4px 0 var(--pixel-heart),
        16px 4px 0 var(--pixel-heart),
        17px 4px 0 var(--pixel-heart),
        18px 4px 0 var(--pixel-heart),
        20px 4px 0 var(--pixel-white),
        21px 4px 0 var(--pixel-white),
        22px 4px 0 var(--pixel-white),
        23px 4px 0 var(--pixel-white),
        7px 5px 0 var(--pixel-white),
        8px 5px 0 var(--pixel-white),
        9px 5px 0 var(--pixel-white),
        10px 5px 0 var(--pixel-white),
        11px 5px 0 var(--pixel-white),
        12px 5px 0 var(--pixel-white),
        13px 5px 0 var(--pixel-white),
        14px 5px 0 var(--pixel-black),
        15px 5px 0 var(--pixel-heart),
        16px 5px 0 var(--pixel-heart),
        17px 5px 0 var(--pixel-black),
        18px 5px 0 var(--pixel-black),
        19px 5px 0 var(--pixel-black),
        20px 5px 0 var(--pixel-white),
        21px 5px 0 var(--pixel-white),
        22px 5px 0 var(--pixel-white),
        23px 5px 0 var(--pixel-white),
        7px 6px 0 var(--pixel-white),
        8px 6px 0 var(--pixel-white),
        9px 6px 0 var(--pixel-white),
        10px 6px 0 var(--pixel-white),
        11px 6px 0 var(--pixel-white),
        12px 6px 0 var(--pixel-white),
        13px 6px 0 var(--pixel-white),
        14px 6px 0 var(--pixel-black),
        15px 6px 0 var(--pixel-heart),
        16px 6px 0 var(--pixel-heart),
        17px 6px 0 var(--pixel-black),
        18px 6px 0 var(--pixel-heart),
        19px 6px 0 var(--pixel-heart),
        20px 6px 0 var(--pixel-heart),
        21px 6px 0 var(--pixel-black),
        22px 6px 0 var(--pixel-heart),
        23px 6px 0 var(--pixel-black),
        7px 7px 0 var(--pixel-black),
        8px 7px 0 var(--pixel-white),
        9px 7px 0 var(--pixel-white),
        10px 7px 0 var(--pixel-white),
        11px 7px 0 var(--pixel-white),
        12px 7px 0 var(--pixel-white),
        13px 7px 0 var(--pixel-white),
        14px 7px 0 var(--pixel-white),
        15px 7px 0 var(--pixel-black),
        16px 7px 0 var(--pixel-heart),
        17px 7px 0 var(--pixel-heart),
        18px 7px 0 var(--pixel-heart),
        19px 7px 0 var(--pixel-heart),
        20px 7px 0 var(--pixel-heart),
        21px 7px 0 var(--pixel-heart),
        22px 7px 0 var(--pixel-heart),
        23px 7px 0 var(--pixel-heart),
        7px 8px 0 var(--pixel-white),
        8px 8px 0 var(--pixel-white),
        9px 8px 0 var(--pixel-white),
        10px 8px 0 var(--pixel-white),
        11px 8px 0 var(--pixel-white),
        12px 8px 0 var(--pixel-white),
        13px 8px 0 var(--pixel-white),
        14px 8px 0 var(--pixel-white),
        15px 8px 0 var(--pixel-white),
        16px 8px 0 var(--pixel-white),
        17px 8px 0 var(--pixel-white),
        18px 8px 0 var(--pixel-black),
        19px 8px 0 var(--pixel-black),
        20px 8px 0 var(--pixel-black),
        22px 8px 0 var(--pixel-heart),
        23px 8px 0 var(--pixel-heart),
        6px 9px 0 var(--pixel-black),
        7px 9px 0 var(--pixel-white),
        8px 9px 0 var(--pixel-white),
        9px 9px 0 var(--pixel-white),
        10px 9px 0 var(--pixel-white),
        11px 9px 0 var(--pixel-white),
        12px 9px 0 var(--pixel-white),
        13px 9px 0 var(--pixel-white),
        14px 9px 0 var(--pixel-white),
        15px 9px 0 var(--pixel-white),
        16px 9px 0 var(--pixel-white),
        17px 9px 0 var(--pixel-white),
        18px 9px 0 var(--pixel-white),
        19px 9px 0 var(--pixel-white),
        20px 9px 0 var(--pixel-black),
        21px 9px 0 var(--pixel-heart),
        22px 9px 0 var(--pixel-black),
        23px 9px 0 var(--pixel-black),
        6px 10px 0 var(--pixel-black),
        7px 10px 0 var(--pixel-white),
        8px 10px 0 var(--pixel-white),
        9px 10px 0 var(--pixel-white),
        10px 10px 0 var(--pixel-white),
        11px 10px 0 var(--pixel-white),
        12px 10px 0 var(--pixel-white),
        13px 10px 0 var(--pixel-white),
        14px 10px 0 var(--pixel-white),
        15px 10px 0 var(--pixel-white),
        16px 10px 0 var(--pixel-white),
        17px 10px 0 var(--pixel-white),
        18px 10px 0 var(--pixel-white),
        19px 10px 0 var(--pixel-white),
        20px 10px 0 var(--pixel-white),
        21px 10px 0 var(--pixel-white),
        22px 10px 0 var(--pixel-white),
        23px 10px 0 var(--pixel-black),
        4px 11px 0 var(--pixel-white),
        5px 11px 0 var(--pixel-white),
        6px 11px 0 var(--pixel-black),
        7px 11px 0 var(--pixel-white),
        8px 11px 0 var(--pixel-white),
        9px 11px 0 var(--pixel-white),
        10px 11px 0 var(--pixel-black),
        11px 11px 0 var(--pixel-white),
        12px 11px 0 var(--pixel-white),
        13px 11px 0 var(--pixel-white),
        14px 11px 0 var(--pixel-white),
        15px 11px 0 var(--pixel-white),
        16px 11px 0 var(--pixel-white),
        17px 11px 0 var(--pixel-white),
        18px 11px 0 var(--pixel-white),
        19px 11px 0 var(--pixel-white),
        20px 11px 0 var(--pixel-white),
        21px 11px 0 var(--pixel-white),
        22px 11px 0 var(--pixel-black),
        23px 11px 0 var(--pixel-black),
        24px 11px 0 var(--pixel-black),
        25px 11px 0 var(--pixel-black),
        6px 12px 0 var(--pixel-black),
        7px 12px 0 var(--pixel-white),
        8px 12px 0 var(--pixel-white),
        9px 12px 0 var(--pixel-white),
        10px 12px 0 var(--pixel-black),
        11px 12px 0 var(--pixel-white),
        12px 12px 0 var(--pixel-white),
        13px 12px 0 var(--pixel-white),
        14px 12px 0 var(--pixel-white),
        15px 12px 0 var(--pixel-white),
        16px 12px 0 var(--pixel-white),
        17px 12px 0 var(--pixel-white),
        18px 12px 0 var(--pixel-black),
        19px 12px 0 var(--pixel-black),
        20px 12px 0 var(--pixel-white),
        21px 12px 0 var(--pixel-white),
        22px 12px 0 var(--pixel-white),
        23px 12px 0 var(--pixel-black),
        6px 13px 0 var(--pixel-black),
        7px 13px 0 var(--pixel-white),
        8px 13px 0 var(--pixel-white),
        9px 13px 0 var(--pixel-white),
        10px 13px 0 var(--pixel-white),
        11px 13px 0 var(--pixel-white),
        12px 13px 0 var(--pixel-white),
        13px 13px 0 var(--pixel-white),
        14px 13px 0 var(--pixel-yellow),
        15px 13px 0 var(--pixel-black),
        16px 13px 0 var(--pixel-white),
        17px 13px 0 var(--pixel-white),
        18px 13px 0 var(--pixel-white),
        19px 13px 0 var(--pixel-white),
        20px 13px 0 var(--pixel-white),
        21px 13px 0 var(--pixel-white),
        22px 13px 0 var(--pixel-black),
        23px 13px 0 var(--pixel-black),
        24px 13px 0 var(--pixel-white),
        7px 14px 0 var(--pixel-black),
        8px 14px 0 var(--pixel-white),
        9px 14px 0 var(--pixel-white),
        10px 14px 0 var(--pixel-white),
        11px 14px 0 var(--pixel-white),
        12px 14px 0 var(--pixel-white),
        13px 14px 0 var(--pixel-white),
        14px 14px 0 var(--pixel-white),
        15px 14px 0 var(--pixel-white),
        16px 14px 0 var(--pixel-white),
        17px 14px 0 var(--pixel-white),
        18px 14px 0 var(--pixel-white),
        19px 14px 0 var(--pixel-white),
        20px 14px 0 var(--pixel-white),
        21px 14px 0 var(--pixel-white),
        22px 14px 0 var(--pixel-white),
        6px 15px 0 var(--pixel-white),
        7px 15px 0 var(--pixel-black),
        8px 15px 0 var(--pixel-white),
        9px 15px 0 var(--pixel-white),
        10px 15px 0 var(--pixel-white),
        11px 15px 0 var(--pixel-white),
        12px 15px 0 var(--pixel-white),
        13px 15px 0 var(--pixel-white),
        14px 15px 0 var(--pixel-white),
        15px 15px 0 var(--pixel-white),
        16px 15px 0 var(--pixel-white),
        17px 15px 0 var(--pixel-white),
        18px 15px 0 var(--pixel-white),
        19px 15px 0 var(--pixel-white),
        20px 15px 0 var(--pixel-white),
        21px 15px 0 var(--pixel-white),
        22px 15px 0 var(--pixel-black),
        23px 15px 0 var(--pixel-black),
        8px 16px 0 var(--pixel-white),
        9px 16px 0 var(--pixel-black),
        10px 16px 0 var(--pixel-white),
        11px 16px 0 var(--pixel-white),
        12px 16px 0 var(--pixel-white),
        13px 16px 0 var(--pixel-white),
        14px 16px 0 var(--pixel-white),
        15px 16px 0 var(--pixel-white),
        16px 16px 0 var(--pixel-white),
        17px 16px 0 var(--pixel-white),
        18px 16px 0 var(--pixel-white),
        19px 16px 0 var(--pixel-white),
        20px 16px 0 var(--pixel-white),
        21px 16px 0 var(--pixel-black),
        9px 17px 0 var(--pixel-white),
        10px 17px 0 var(--pixel-black),
        11px 17px 0 var(--pixel-black),
        12px 17px 0 var(--pixel-black),
        13px 17px 0 var(--pixel-black),
        14px 17px 0 var(--pixel-black),
        15px 17px 0 var(--pixel-black),
        16px 17px 0 var(--pixel-black),
        17px 17px 0 var(--pixel-black),
        18px 17px 0 var(--pixel-black),
        19px 17px 0 var(--pixel-black),
        9px 18px 0 var(--pixel-red),
        10px 18px 0 var(--pixel-red),
        11px 18px 0 var(--pixel-black),
        12px 18px 0 var(--pixel-black),
        13px 18px 0 var(--pixel-red),
        14px 18px 0 var(--pixel-red),
        15px 18px 0 var(--pixel-red),
        16px 18px 0 var(--pixel-black),
        17px 18px 0 var(--pixel-black),
        18px 18px 0 var(--pixel-red),
        19px 18px 0 var(--pixel-red),
        20px 18px 0 var(--pixel-red),
        8px 19px 0 var(--pixel-white),
        9px 19px 0 var(--pixel-white),
        10px 19px 0 var(--pixel-black),
        11px 19px 0 var(--pixel-black),
        12px 19px 0 var(--pixel-yellow),
        13px 19px 0 var(--pixel-black),
        14px 19px 0 var(--pixel-black),
        15px 19px 0 var(--pixel-black),
        16px 19px 0 var(--pixel-black),
        17px 19px 0 var(--pixel-yellow),
        18px 19px 0 var(--pixel-black),
        19px 19px 0 var(--pixel-red),
        20px 19px 0 var(--pixel-white),
        21px 19px 0 var(--pixel-white),
        7px 20px 0 var(--pixel-black),
        8px 20px 0 var(--pixel-white),
        9px 20px 0 var(--pixel-white),
        10px 20px 0 #00aaff,
        11px 20px 0 var(--pixel-black),
        12px 20px 0 var(--pixel-yellow),
        13px 20px 0 #00aaff,
        14px 20px 0 #00aaff,
        15px 20px 0 #00aaff,
        16px 20px 0 var(--pixel-black),
        17px 20px 0 var(--pixel-yellow),
        18px 20px 0 #00aaff,
        19px 20px 0 var(--pixel-black),
        20px 20px 0 var(--pixel-white),
        21px 20px 0 var(--pixel-white),
        22px 20px 0 var(--pixel-black),
        7px 21px 0 var(--pixel-black),
        8px 21px 0 var(--pixel-white),
        9px 21px 0 var(--pixel-black),
        10px 21px 0 #00aaff,
        11px 21px 0 #00aaff,
        12px 21px 0 #00aaff,
        13px 21px 0 #00aaff,
        14px 21px 0 #00aaff,
        15px 21px 0 #00aaff,
        16px 21px 0 #00aaff,
        17px 21px 0 #00aaff,
        18px 21px 0 #00aaff,
        19px 21px 0 var(--pixel-black),
        20px 21px 0 var(--pixel-white),
        21px 21px 0 var(--pixel-white),
        22px 21px 0 var(--pixel-black),
        8px 22px 0 var(--pixel-black),
        9px 22px 0 var(--pixel-black),
        10px 22px 0 #00aaff,
        11px 22px 0 #00aaff,
        12px 22px 0 #00aaff,
        13px 22px 0 #00aaff,
        14px 22px 0 #00aaff,
        15px 22px 0 #00aaff,
        16px 22px 0 #00aaff,
        17px 22px 0 #00aaff,
        18px 22px 0 #00aaff,
        19px 22px 0 var(--pixel-black),
        20px 22px 0 var(--pixel-black),
        21px 22px 0 var(--pixel-black),
        9px 23px 0 var(--pixel-black),
        10px 23px 0 #00aaff,
        11px 23px 0 #00aaff,
        12px 23px 0 #00aaff,
        13px 23px 0 #00aaff,
        14px 23px 0 var(--pixel-black),
        15px 23px 0 #00aaff,
        16px 23px 0 #00aaff,
        17px 23px 0 #00aaff,
        18px 23px 0 #00aaff,
        19px 23px 0 #00aaff,
        20px 23px 0 var(--pixel-black),
        9px 24px 0 var(--pixel-black),
        10px 24px 0 var(--pixel-black),
        11px 24px 0 var(--pixel-black),
        12px 24px 0 var(--pixel-black),
        13px 24px 0 var(--pixel-black),
        14px 24px 0 var(--pixel-black),
        15px 24px 0 var(--pixel-black),
        16px 24px 0 var(--pixel-black),
        17px 24px 0 var(--pixel-black),
        18px 24px 0 var(--pixel-black),
        19px 24px 0 var(--pixel-black),
        20px 24px 0 var(--pixel-black),
        9px 25px 0 var(--pixel-black),
        10px 25px 0 var(--pixel-white),
        11px 25px 0 var(--pixel-white),
        12px 25px 0 var(--pixel-white),
        13px 25px 0 var(--pixel-white),
        14px 25px 0 var(--pixel-black),
        15px 25px 0 var(--pixel-white),
        16px 25px 0 var(--pixel-white),
        17px 25px 0 var(--pixel-white),
        18px 25px 0 var(--pixel-white),
        19px 25px 0 var(--pixel-white),
        20px 25px 0 var(--pixel-black),
        10px 26px 0 var(--pixel-white),
        11px 26px 0 var(--pixel-white),
        12px 26px 0 var(--pixel-white),
        13px 26px 0 var(--pixel-white),
        14px 26px 0 var(--pixel-black),
        15px 26px 0 var(--pixel-white),
        16px 26px 0 var(--pixel-white),
        17px 26px 0 var(--pixel-white),
        18px 26px 0 var(--pixel-white),
        19px 26px 0 var(--pixel-black);
}

.pixel-hello-kitty.male::before,
.pixel-hello-kitty.male.running::before,
.mini-hk.male::before,
.mini-hk.couple::before {
    width: 1px;
    height: 1px;
    box-shadow:
        17px 2px 0 var(--pixel-white),
        7px 3px 0 var(--pixel-black),
        8px 3px 0 var(--pixel-black),
        9px 3px 0 var(--pixel-black),
        18px 3px 0 var(--pixel-black),
        20px 3px 0 var(--pixel-black),
        21px 3px 0 var(--pixel-black),
        22px 3px 0 var(--pixel-black),
        7px 4px 0 var(--pixel-white),
        8px 4px 0 var(--pixel-white),
        9px 4px 0 var(--pixel-white),
        10px 4px 0 var(--pixel-white),
        11px 4px 0 var(--pixel-black),
        12px 4px 0 var(--pixel-black),
        13px 4px 0 var(--pixel-black),
        14px 4px 0 var(--pixel-black),
        20px 4px 0 var(--pixel-white),
        21px 4px 0 var(--pixel-white),
        22px 4px 0 var(--pixel-white),
        23px 4px 0 var(--pixel-white),
        7px 5px 0 var(--pixel-white),
        8px 5px 0 var(--pixel-white),
        9px 5px 0 var(--pixel-white),
        10px 5px 0 var(--pixel-white),
        11px 5px 0 var(--pixel-white),
        12px 5px 0 var(--pixel-white),
        13px 5px 0 var(--pixel-white),
        14px 5px 0 var(--pixel-black),
        17px 5px 0 var(--pixel-black),
        18px 5px 0 var(--pixel-black),
        19px 5px 0 var(--pixel-black),
        20px 5px 0 var(--pixel-white),
        21px 5px 0 var(--pixel-white),
        22px 5px 0 var(--pixel-white),
        23px 5px 0 var(--pixel-white),
        7px 6px 0 var(--pixel-white),
        8px 6px 0 var(--pixel-white),
        9px 6px 0 var(--pixel-white),
        10px 6px 0 var(--pixel-white),
        11px 6px 0 var(--pixel-white),
        12px 6px 0 var(--pixel-white),
        13px 6px 0 var(--pixel-white),
        14px 6px 0 var(--pixel-black),
        17px 6px 0 var(--pixel-black),
        21px 6px 0 var(--pixel-black),
        23px 6px 0 var(--pixel-black),
        7px 7px 0 var(--pixel-black),
        8px 7px 0 var(--pixel-white),
        9px 7px 0 var(--pixel-white),
        10px 7px 0 var(--pixel-white),
        11px 7px 0 var(--pixel-white),
        12px 7px 0 var(--pixel-white),
        13px 7px 0 var(--pixel-white),
        14px 7px 0 var(--pixel-white),
        15px 7px 0 var(--pixel-black),
        7px 8px 0 var(--pixel-white),
        8px 8px 0 var(--pixel-white),
        9px 8px 0 var(--pixel-white),
        10px 8px 0 var(--pixel-white),
        11px 8px 0 var(--pixel-white),
        12px 8px 0 var(--pixel-white),
        13px 8px 0 var(--pixel-white),
        14px 8px 0 var(--pixel-white),
        15px 8px 0 var(--pixel-white),
        16px 8px 0 var(--pixel-white),
        17px 8px 0 var(--pixel-white),
        18px 8px 0 var(--pixel-black),
        19px 8px 0 var(--pixel-black),
        20px 8px 0 var(--pixel-black),
        6px 9px 0 var(--pixel-black),
        7px 9px 0 var(--pixel-white),
        8px 9px 0 var(--pixel-white),
        9px 9px 0 var(--pixel-white),
        10px 9px 0 var(--pixel-white),
        11px 9px 0 var(--pixel-white),
        12px 9px 0 var(--pixel-white),
        13px 9px 0 var(--pixel-white),
        14px 9px 0 var(--pixel-white),
        15px 9px 0 var(--pixel-white),
        16px 9px 0 var(--pixel-white),
        17px 9px 0 var(--pixel-white),
        18px 9px 0 var(--pixel-white),
        19px 9px 0 var(--pixel-white),
        20px 9px 0 var(--pixel-black),
        22px 9px 0 var(--pixel-black),
        23px 9px 0 var(--pixel-black),
        6px 10px 0 var(--pixel-black),
        7px 10px 0 var(--pixel-white),
        8px 10px 0 var(--pixel-white),
        9px 10px 0 var(--pixel-white),
        10px 10px 0 var(--pixel-white),
        11px 10px 0 var(--pixel-white),
        12px 10px 0 var(--pixel-white),
        13px 10px 0 var(--pixel-white),
        14px 10px 0 var(--pixel-white),
        15px 10px 0 var(--pixel-white),
        16px 10px 0 var(--pixel-white),
        17px 10px 0 var(--pixel-white),
        18px 10px 0 var(--pixel-white),
        19px 10px 0 var(--pixel-white),
        20px 10px 0 var(--pixel-white),
        21px 10px 0 var(--pixel-white),
        22px 10px 0 var(--pixel-white),
        23px 10px 0 var(--pixel-black),
        4px 11px 0 var(--pixel-white),
        5px 11px 0 var(--pixel-white),
        6px 11px 0 var(--pixel-black),
        7px 11px 0 var(--pixel-white),
        8px 11px 0 var(--pixel-white),
        9px 11px 0 var(--pixel-white),
        10px 11px 0 var(--pixel-black),
        11px 11px 0 var(--pixel-white),
        12px 11px 0 var(--pixel-white),
        13px 11px 0 var(--pixel-white),
        14px 11px 0 var(--pixel-white),
        15px 11px 0 var(--pixel-white),
        16px 11px 0 var(--pixel-white),
        17px 11px 0 var(--pixel-white),
        18px 11px 0 var(--pixel-white),
        19px 11px 0 var(--pixel-white),
        20px 11px 0 var(--pixel-white),
        21px 11px 0 var(--pixel-white),
        22px 11px 0 var(--pixel-black),
        23px 11px 0 var(--pixel-black),
        24px 11px 0 var(--pixel-black),
        25px 11px 0 var(--pixel-black),
        6px 12px 0 var(--pixel-black),
        7px 12px 0 var(--pixel-white),
        8px 12px 0 var(--pixel-white),
        9px 12px 0 var(--pixel-white),
        10px 12px 0 var(--pixel-black),
        11px 12px 0 var(--pixel-white),
        12px 12px 0 var(--pixel-white),
        13px 12px 0 var(--pixel-white),
        14px 12px 0 var(--pixel-white),
        15px 12px 0 var(--pixel-white),
        16px 12px 0 var(--pixel-white),
        17px 12px 0 var(--pixel-white),
        18px 12px 0 var(--pixel-black),
        19px 12px 0 var(--pixel-black),
        20px 12px 0 var(--pixel-white),
        21px 12px 0 var(--pixel-white),
        22px 12px 0 var(--pixel-white),
        23px 12px 0 var(--pixel-black),
        6px 13px 0 var(--pixel-black),
        7px 13px 0 var(--pixel-white),
        8px 13px 0 var(--pixel-white),
        9px 13px 0 var(--pixel-white),
        10px 13px 0 var(--pixel-white),
        11px 13px 0 var(--pixel-white),
        12px 13px 0 var(--pixel-white),
        13px 13px 0 var(--pixel-white),
        14px 13px 0 var(--pixel-yellow),
        15px 13px 0 var(--pixel-black),
        16px 13px 0 var(--pixel-white),
        17px 13px 0 var(--pixel-white),
        18px 13px 0 var(--pixel-white),
        19px 13px 0 var(--pixel-white),
        20px 13px 0 var(--pixel-white),
        21px 13px 0 var(--pixel-white),
        22px 13px 0 var(--pixel-black),
        23px 13px 0 var(--pixel-black),
        24px 13px 0 var(--pixel-white),
        7px 14px 0 var(--pixel-black),
        8px 14px 0 var(--pixel-white),
        9px 14px 0 var(--pixel-white),
        10px 14px 0 var(--pixel-white),
        11px 14px 0 var(--pixel-white),
        12px 14px 0 var(--pixel-white),
        13px 14px 0 var(--pixel-white),
        14px 14px 0 var(--pixel-white),
        15px 14px 0 var(--pixel-white),
        16px 14px 0 var(--pixel-white),
        17px 14px 0 var(--pixel-white),
        18px 14px 0 var(--pixel-white),
        19px 14px 0 var(--pixel-white),
        20px 14px 0 var(--pixel-white),
        21px 14px 0 var(--pixel-white),
        22px 14px 0 var(--pixel-white),
        6px 15px 0 var(--pixel-white),
        7px 15px 0 var(--pixel-black),
        8px 15px 0 var(--pixel-white),
        9px 15px 0 var(--pixel-white),
        10px 15px 0 var(--pixel-white),
        11px 15px 0 var(--pixel-white),
        12px 15px 0 var(--pixel-white),
        13px 15px 0 var(--pixel-white),
        14px 15px 0 var(--pixel-white),
        15px 15px 0 var(--pixel-white),
        16px 15px 0 var(--pixel-white),
        17px 15px 0 var(--pixel-white),
        18px 15px 0 var(--pixel-white),
        19px 15px 0 var(--pixel-white),
        20px 15px 0 var(--pixel-white),
        21px 15px 0 var(--pixel-white),
        22px 15px 0 var(--pixel-black),
        23px 15px 0 var(--pixel-black),
        8px 16px 0 var(--pixel-white),
        9px 16px 0 var(--pixel-black),
        10px 16px 0 var(--pixel-white),
        11px 16px 0 var(--pixel-white),
        12px 16px 0 var(--pixel-white),
        13px 16px 0 var(--pixel-white),
        14px 16px 0 var(--pixel-white),
        15px 16px 0 var(--pixel-white),
        16px 16px 0 var(--pixel-white),
        17px 16px 0 var(--pixel-white),
        18px 16px 0 var(--pixel-white),
        19px 16px 0 var(--pixel-white),
        20px 16px 0 var(--pixel-white),
        21px 16px 0 var(--pixel-black),
        9px 17px 0 var(--pixel-white),
        10px 17px 0 var(--pixel-black),
        11px 17px 0 var(--pixel-black),
        12px 17px 0 var(--pixel-black),
        13px 17px 0 var(--pixel-black),
        14px 17px 0 var(--pixel-black),
        15px 17px 0 var(--pixel-black),
        16px 17px 0 var(--pixel-black),
        17px 17px 0 var(--pixel-black),
        18px 17px 0 var(--pixel-black),
        19px 17px 0 var(--pixel-black),
        9px 18px 0 var(--pixel-red),
        10px 18px 0 var(--pixel-red),
        11px 18px 0 var(--pixel-black),
        12px 18px 0 var(--pixel-black),
        13px 18px 0 var(--pixel-red),
        14px 18px 0 var(--pixel-red),
        15px 18px 0 var(--pixel-red),
        16px 18px 0 var(--pixel-black),
        17px 18px 0 var(--pixel-black),
        18px 18px 0 var(--pixel-red),
        19px 18px 0 var(--pixel-red),
        20px 18px 0 var(--pixel-red),
        8px 19px 0 var(--pixel-white),
        9px 19px 0 var(--pixel-white),
        10px 19px 0 var(--pixel-black),
        11px 19px 0 var(--pixel-black),
        12px 19px 0 var(--pixel-yellow),
        13px 19px 0 var(--pixel-black),
        14px 19px 0 var(--pixel-black),
        15px 19px 0 var(--pixel-black),
        16px 19px 0 var(--pixel-black),
        17px 19px 0 var(--pixel-yellow),
        18px 19px 0 var(--pixel-black),
        19px 19px 0 var(--pixel-red),
        20px 19px 0 var(--pixel-white),
        21px 19px 0 var(--pixel-white),
        7px 20px 0 var(--pixel-black),
        8px 20px 0 var(--pixel-white),
        9px 20px 0 var(--pixel-white),
        10px 20px 0 #00aaff,
        11px 20px 0 var(--pixel-black),
        12px 20px 0 var(--pixel-yellow),
        13px 20px 0 #00aaff,
        14px 20px 0 #00aaff,
        15px 20px 0 #00aaff,
        16px 20px 0 var(--pixel-black),
        17px 20px 0 var(--pixel-yellow),
        18px 20px 0 #00aaff,
        19px 20px 0 var(--pixel-black),
        20px 20px 0 var(--pixel-white),
        21px 20px 0 var(--pixel-white),
        22px 20px 0 var(--pixel-black),
        7px 21px 0 var(--pixel-black),
        8px 21px 0 var(--pixel-white),
        9px 21px 0 var(--pixel-black),
        10px 21px 0 #00aaff,
        11px 21px 0 #00aaff,
        12px 21px 0 #00aaff,
        13px 21px 0 #00aaff,
        14px 21px 0 #00aaff,
        15px 21px 0 #00aaff,
        16px 21px 0 #00aaff,
        17px 21px 0 #00aaff,
        18px 21px 0 #00aaff,
        19px 21px 0 var(--pixel-black),
        20px 21px 0 var(--pixel-white),
        21px 21px 0 var(--pixel-white),
        22px 21px 0 var(--pixel-black),
        8px 22px 0 var(--pixel-black),
        9px 22px 0 var(--pixel-black),
        10px 22px 0 #00aaff,
        11px 22px 0 #00aaff,
        12px 22px 0 #00aaff,
        13px 22px 0 #00aaff,
        14px 22px 0 #00aaff,
        15px 22px 0 #00aaff,
        16px 22px 0 #00aaff,
        17px 22px 0 #00aaff,
        18px 22px 0 #00aaff,
        19px 22px 0 var(--pixel-black),
        20px 22px 0 var(--pixel-black),
        21px 22px 0 var(--pixel-black),
        9px 23px 0 var(--pixel-black),
        10px 23px 0 #00aaff,
        11px 23px 0 #00aaff,
        12px 23px 0 #00aaff,
        13px 23px 0 #00aaff,
        14px 23px 0 var(--pixel-black),
        15px 23px 0 #00aaff,
        16px 23px 0 #00aaff,
        17px 23px 0 #00aaff,
        18px 23px 0 #00aaff,
        19px 23px 0 #00aaff,
        20px 23px 0 var(--pixel-black),
        9px 24px 0 var(--pixel-black),
        10px 24px 0 var(--pixel-black),
        11px 24px 0 var(--pixel-black),
        12px 24px 0 var(--pixel-black),
        13px 24px 0 var(--pixel-black),
        14px 24px 0 var(--pixel-black),
        15px 24px 0 var(--pixel-black),
        16px 24px 0 var(--pixel-black),
        17px 24px 0 var(--pixel-black),
        18px 24px 0 var(--pixel-black),
        19px 24px 0 var(--pixel-black),
        20px 24px 0 var(--pixel-black),
        9px 25px 0 var(--pixel-black),
        10px 25px 0 var(--pixel-white),
        11px 25px 0 var(--pixel-white),
        12px 25px 0 var(--pixel-white),
        13px 25px 0 var(--pixel-white),
        14px 25px 0 var(--pixel-black),
        15px 25px 0 var(--pixel-white),
        16px 25px 0 var(--pixel-white),
        17px 25px 0 var(--pixel-white),
        18px 25px 0 var(--pixel-white),
        19px 25px 0 var(--pixel-white),
        20px 25px 0 var(--pixel-black),
        10px 26px 0 var(--pixel-white),
        11px 26px 0 var(--pixel-white),
        12px 26px 0 var(--pixel-white),
        13px 26px 0 var(--pixel-white),
        14px 26px 0 var(--pixel-black),
        15px 26px 0 var(--pixel-white),
        16px 26px 0 var(--pixel-white),
        17px 26px 0 var(--pixel-white),
        18px 26px 0 var(--pixel-white),
        19px 26px 0 var(--pixel-black);
}

/* ========================
   Restored Window Styles
   ======================== */

.pixel-windows-container {
    display: flex;
    gap: 40px;
    justify-content: center;
    align-items: center;
    padding: 20px;
    flex-wrap: wrap;
}

.pixel-window {
    width: 480px;
    background: #fff;
    border: 4px solid var(--pixel-black);
    box-shadow: 8px 8px 0 rgba(0, 0, 0, 0.2);
    display: flex;
    flex-direction: column;
}

.pixel-window-header {
    background: #e0e0e0;
    border-bottom: 4px solid var(--pixel-black);
    padding: 8px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.pw-btn {
    width: 12px;
    height: 12px;
    border: 2px solid var(--pixel-black);
    display: inline-block;
}

.pw-btn.red {
    background: #ff5f56;
}

.pw-btn.yellow {
    background: #ffbd2e;
}

.pw-btn.green {
    background: #27c93f;
}

.pw-title {
    font-size: 10px;
    margin-left: 8px;
    margin-left: 8px;
    font-weight: bold;
}

.pixel-window-content {
    background: #fff;
    height: 320px;
    position: relative;
    overflow: hidden;
    padding: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.scene-frame {
    width: 100%;
    height: 100%;
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.pixel-play-btn {
    width: 100%;
    padding: 10px;
    background: var(--pixel-black);
    color: var(--pixel-white);
    border: none;
    font-family: var(--font-pixel);
    cursor: pointer;
    font-size: 10px;
}

.pixel-play-btn:hover {
    background: var(--pixel-pink);
}

/* Mini Kitties - Using the extracted shadows */
.mini-hk {
    position: relative;
    width: 32px;
    height: 32px;
    transform: scale(2);
    /* Smaller scale for windows */
    transform-origin: center bottom;
    image-rendering: pixelated;
}

.mini-hk::before,
.mini-hk::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 1px;
    height: 1px;
    background: transparent;
}

/* Couple: Male (Before) + Female (After) */
.mini-hk.couple {
    width: 64px;
    /* Double width */
}

.mini-hk.couple::before {
    /* Male Shadow will be applied here */
    transform: translateX(-12px);
    /* Shift left */
}

.mini-hk.couple::after {
    /* Female Shadow will be applied here */
    transform: translateX(12px);
    /* Shift right */
}

/* Animations/Effects in Windows */
.pixel-speech-bubble {
    background: #fff;
    border: 2px solid #000;
    padding: 5px 10px;
    border-radius: 8px;
    font-size: 8px;
    position: absolute;
    top: 10px;
    white-space: nowrap;
    z-index: 10;
}

.kiss-effect {
    font-size: 24px;
    animation: pop 0.5s infinite;
}

.bonk-effect {
    font-size: 20px;
    font-weight: bold;
    color: red;
    animation: shake 0.2s infinite;
}

@keyframes pop {
    0% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.2);
    }

    100% {
        transform: scale(1);
    }
}

@keyframes shake {

    0%,
    100% {
        transform: translateX(0);
    }

    25% {
        transform: translateX(-2px);
    }

    75% {
        transform: translateX(2px);
    }
}

/* ========================
   Restored Slide Styles
   ======================== */

/* --- Page 2: Timeline --- */
.pixel-timeline {
    position: relative;
    max-width: 600px;
    /* Limit width */
    margin: 40px auto;
    padding-left: 20px;
    border-left: 4px solid var(--pixel-white);
}

.timeline-item {
    position: relative;
    margin-bottom: 30px;
    padding-left: 20px;
}

.timeline-dot {
    position: absolute;
    left: -28px;
    /* Center on line (line width 4px + padding 20px approx) */
    top: 0;
    width: 16px;
    height: 16px;
    background: var(--pixel-pink);
    border: 4px solid var(--pixel-white);
    box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.2);
}

.timeline-item:hover .timeline-dot {
    background: var(--pixel-yellow);
    transform: scale(1.2);
}

.timeline-label {
    background: #fff;
    border: 4px solid var(--pixel-black);
    padding: 10px;
    display: inline-block;
    box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.2);
    font-size: 12px;
    cursor: pointer;
}

.timeline-label:hover {
    transform: translateX(4px);
    box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.2);
}

/* --- Page 4: Love Cards --- */
.pixel-couple {
    display: flex;
    align-items: flex-end;
    gap: 100px;
    /* Large space for scaled kitties */
    position: relative;
    /* Removed padding-bottom */
}

.couple-heart {
    position: absolute;
    top: -60px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 40px;
    animation: pulse 1s infinite;
}

@keyframes pulse {

    0%,
    100% {
        transform: translateX(-50%) scale(1);
    }

    50% {
        transform: translateX(-50%) scale(1.2);
    }
}

.pixel-love-windows {
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
    margin-top: 20px;
}

.pixel-love-card {
    background: #fff;
    border: 4px solid var(--pixel-black);
    padding: 20px;
    width: 420px;
    text-align: center;
    box-shadow: 8px 8px 0 rgba(0, 0, 0, 0.2);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    transition: transform 0.2s;
}

.pixel-love-card:hover {
    transform: translateY(-5px);
}

.love-icon {
    font-size: 32px;
}

.love-scene-img {
    width: 100%;
    height: auto;
    image-rendering: pixelated;
    border: 2px solid var(--pixel-black);
    margin-bottom: 5px;
}

.love-text {
    font-weight: bold;
    color: var(--pixel-pink-dark);
    font-size: 12px;
}

.love-caption {
    font-size: 8px;
    color: #666;
}

/* --- Ending Overlay --- */
.ending-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    /* Dark dim */
    z-index: 1000;
    display: flex;
    justify-content: center;
    align-items: center;
}

.ending-content {
    text-align: center;
    color: #fff;
    animation: popIn 0.5s;
}

.pixel-title.ending {
    color: var(--pixel-pink-light);
    text-shadow: 4px 4px 0 var(--pixel-pink-dark);
    line-height: 1.5;
    margin-bottom: 30px;
}

.pixel-signature {
    margin-top: 20px;
    font-size: 14px;
    color: var(--pixel-yellow);
}

.rain-hearts {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
}

@keyframes popIn {
    0% {
        transform: scale(0);
    }

    80% {
        transform: scale(1.1);
    }

    100% {
        transform: scale(1);
    }
}

/* Ensure hidden works */
.hidden {
    display: none !important;
}

/* ========================
   Running/Walking Transition Animation
   ======================== */

.running-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, #87CEEB 60%, #7ec850 60%);
    z-index: 500;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    padding-bottom: 100px;
}

.running-overlay.hidden {
    display: none !important;
}

.running-kitties {
    display: flex;
    gap: 20px;
    align-items: flex-end;
    animation: runAcross 6s linear forwards;
}

@keyframes runAcross {
    0% {
        transform: translateX(-150vw);
    }

    100% {
        transform: translateX(150vw);
    }
}

.run-hearts {
    font-size: 24px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    animation: heartPop 0.5s ease-in-out infinite;
}

@keyframes heartPop {

    0%,
    100% {
        transform: translate(-50%, -50%) scale(1);
    }

    50% {
        transform: translate(-50%, -50%) scale(1.3);
    }
}

.pixel-hello-kitty.running {
    /* Ensure explicit dimensions for running characters */
    width: 32px;
    height: 32px;
    transform: scale(4);
    transform-origin: bottom center;
    animation: kittyRun 0.6s steps(2) infinite;
}

/* Ensure running kitties have proper pseudo-element setup */
.pixel-hello-kitty.running::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 1px;
    height: 1px;
    background: transparent;
}

/* Ensure ::after is disabled for running kitties too */
.pixel-hello-kitty.running::after {
    content: none !important;
    display: none !important;
}

@keyframes kittyRun {

    0%,
    100% {
        transform: scale(4) translateY(0);
    }

    50% {
        transform: scale(4) translateY(-5px);
    }
}

/* ========================
   Button Interaction Fixes
   ======================== */

/* Ensure characters don't block clicks */
.page1-characters,
.page2-characters,
.page3-characters,
.page4-characters {
    pointer-events: none;
}

/* Ensure buttons are clickable */
.pixel-btn {
    pointer-events: auto !important;
    cursor: pointer;
    z-index: 100;
}

/* Memory Popup Positioning */
.memory-popup {
    position: absolute;
    background: #fff;
    border: 4px solid var(--pixel-black);
    padding: 15px;
    box-shadow: 8px 8px 0 rgba(0, 0, 0, 0.2);
    z-index: 200;
    max-width: 300px;
    font-size: 10px;
    line-height: 1.5;
    /* Will be positioned dynamically via JS */
}

.memory-text {
    margin: 0;
}

/* === Scene Media === */
.scene-media {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    border-radius: 8px;
}

.scene-media.hidden {
    display: none !important;
}

/* Ensure window content has relative positioning for media */
.pixel-window-content {
    position: relative;
    overflow: hidden;
}

/* === Custom Window Sizes to Fit Assets === */

/* Kissing Scene - Landscape Video */
#window-kiss {
    width: 480px;
}

#window-kiss .pixel-window-content {
    height: 320px;
}

/* Tickle Scene - Portrait Image (2:3 Ratio) */
#window-tickle {
    width: 320px;
    /* Reduced from 400px */
}

#window-tickle .pixel-window-content {
    height: 480px;
    /* 320 * 1.5 = 480 */
}

/* Wrong Answer Image */
.wrong-answer-img {
    max-width: 150px;
    height: auto;
    margin-bottom: 15px;
    display: block;
    margin-left: auto;
    margin-right: auto;
}

/* === Collage Grid Styles (Full Screen Masonry) === */
.ending-content.scrollable {
    width: 100vw;
    height: 100vh;
    max-width: none;
    max-height: none;
    padding: 0;
    margin: 0;
    overflow-y: auto;
    background: var(--pixel-black);
    scrollbar-width: thin;
    scrollbar-color: var(--pixel-pink) var(--pixel-black);
    position: relative;
    box-sizing: border-box;
}

.collage-message {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 200;
    max-width: 600px;
    width: 90%;
    background: rgba(0, 0, 0, 0.6);
    border-radius: 12px;
    padding: 30px;
    pointer-events: none;
    font-family: var(--font-pixel);
    line-height: 1.6;
    color: var(--pixel-white);
    text-shadow: 2px 2px 0 var(--pixel-black);
    text-align: center;
}

.collage-message p {
    margin-bottom: 20px;
    font-size: 14px;
}

.collage-message .signature {
    margin-top: 40px;
    color: var(--pixel-pink);
    font-size: 16px;
    display: block;
}

.collage-grid {
    column-count: 5;
    column-gap: 0;
    width: 100%;
    margin: 0;
    line-height: 0;
}

@media (max-width: 1200px) {
    .collage-grid {
        column-count: 4;
    }
}

@media (max-width: 900px) {
    .collage-grid {
        column-count: 3;
    }
}

@media (max-width: 600px) {
    .collage-grid {
        column-count: 2;
    }
}

.collage-item {
    break-inside: avoid;
    margin: 0;
    padding: 0;
    width: 100%;
    border: none;
    background: transparent;
    line-height: 0;
}

.collage-item img,
.collage-item video {
    width: 100%;
    height: auto !important;
    display: block;
    object-fit: contain;
    border: none;
    margin: 0;
    padding: 0;
}

/* Hover effect */
.collage-item:hover {
    filter: brightness(1.1);
    z-index: 10;
    position: relative;
}

/* Floating Overlay Elements */
.pixel-title.ending {
    position: fixed;
    top: 50px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 50;
    background: rgba(45, 27, 46, 0.7);
    padding: 15px 30px;
    border-radius: 8px;
    border: 2px solid var(--pixel-pink);
    color: var(--pixel-white);
    text-shadow: 2px 2px 0 var(--pixel-pink-dark);
    margin: 0;
}

.pixel-couple.large {
    position: fixed;
    bottom: 80px;
    left: 50%;
    transform: translateX(-50%) scale(4);
    z-index: 50;
    pointer-events: none;
    filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
}

.pixel-signature {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 50;
    background: rgba(45, 27, 46, 0.7);
    padding: 8px 16px;
    border-radius: 4px;
    border: 1px solid var(--pixel-pink);
    margin: 0;
}

.rain-hearts {
    z-index: 60;
    pointer-events: none;
}